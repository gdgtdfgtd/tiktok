<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FireTok - –°–≤–æ–±–æ–¥–∞</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #ff4500; /* –û–≥–Ω–µ–Ω–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π */
            --bg: #000000;
            --text: #ffffff;
            --gray: #2f2f2f;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
        
        body { background: var(--bg); color: var(--text); overflow: hidden; height: 100vh; }

        /* --- LAYOUT --- */
        .app-container {
            display: flex;
            height: 100%;
            width: 100%;
        }

        /* --- VIDEO FEED (Center) --- */
        .feed {
            flex: 1;
            height: 100%;
            overflow-y: scroll;
            scroll-snap-type: y mandatory;
            position: relative;
            scrollbar-width: none; /* Firefox */
        }
        .feed::-webkit-scrollbar { display: none; }

        .video-container {
            height: 100vh;
            width: 100%;
            scroll-snap-align: start;
            position: relative;
            background: #111;
            border-bottom: 1px solid #333;
        }

        video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* --- UI OVERLAY --- */
        .overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 20px;
            background: linear-gradient(transparent, rgba(0,0,0,0.8));
            pointer-events: none;
        }

        .video-info {
            pointer-events: auto;
            margin-bottom: 60px;
            max-width: 70%;
        }

        .username { font-weight: bold; font-size: 1.1em; text-shadow: 1px 1px 2px black; }
        .description { font-size: 0.9em; margin-top: 5px; text-shadow: 1px 1px 2px black; }

        /* --- SIDEBAR ACTIONS --- */
        .actions {
            position: absolute;
            right: 10px;
            bottom: 100px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            pointer-events: auto;
            align-items: center;
        }

        .action-btn {
            background: rgba(0,0,0,0.4);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 24px;
            cursor: pointer;
            transition: 0.2s;
        }
        
        .action-label { font-size: 10px; margin-top: 5px; font-weight: bold; }
        
        .like-active { color: var(--primary); animation: pop 0.3s ease; }

        @keyframes pop { 50% { transform: scale(1.4); } }

        /* --- PROFILE AVATAR IN FEED --- */
        .feed-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid white;
            position: relative;
        }
        .follow-plus {
            position: absolute;
            bottom: -5px;
            left: 15px;
            background: var(--primary);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            text-align: center;
            line-height: 20px;
            font-size: 12px;
            display: block;
        }

        /* --- BOTTOM NAV --- */
        .navbar {
            position: fixed;
            bottom: 0;
            width: 100%;
            height: 60px;
            background: black;
            display: flex;
            justify-content: space-around;
            align-items: center;
            border-top: 1px solid #333;
            z-index: 1000;
        }
        .nav-item { color: #888; font-size: 24px; cursor: pointer; }
        .nav-item.active { color: white; }
        .add-btn {
            width: 45px;
            height: 30px;
            background: linear-gradient(45deg, var(--primary), #ff0);
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: black;
        }

        /* --- PROFILE MODAL --- */
        .modal {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg);
            z-index: 2000;
            display: none;
            overflow-y: auto;
            flex-direction: column;
        }
        
        .profile-header {
            text-align: center;
            padding: 20px;
            border-bottom: 1px solid #333;
        }
        .profile-pic {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 3px solid var(--primary);
            margin: 0 auto;
            background: url('https://via.placeholder.com/100') no-repeat center;
            background-size: cover;
        }
        .stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 15px 0;
        }
        .stat-box { text-align: center; }
        .stat-num { font-weight: bold; font-size: 18px; }
        .stat-label { color: gray; font-size: 12px; }

        .friends-list { padding: 10px; }
        .friend-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #222;
        }
        .friend-pic { width: 40px; height: 40px; border-radius: 50%; background: gray; margin-right: 10px; }

        /* --- UPLOAD SECTION --- */
        #uploadInput { display: none; }
        
        /* --- COMMENTS DRAWER --- */
        .comments-drawer {
            position: fixed;
            bottom: -100%;
            left: 0;
            width: 100%;
            height: 70%;
            background: #1a1a1a;
            border-radius: 20px 20px 0 0;
            z-index: 3000;
            transition: 0.3s;
            display: flex;
            flex-direction: column;
        }
        .comments-drawer.open { bottom: 0; }
        .drawer-header { padding: 15px; text-align: center; border-bottom: 1px solid #333; position: relative; }
        .close-drawer { position: absolute; right: 15px; top: 15px; cursor: pointer; }
        
        .comments-list { flex: 1; overflow-y: auto; padding: 10px; }
        .comment-item { margin-bottom: 15px; display: flex; gap: 10px; }
        .comment-content { font-size: 13px; }
        .comment-meta { color: gray; font-size: 10px; }

        .comment-input-area {
            padding: 10px;
            background: #222;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .c-input {
            flex: 1;
            background: #333;
            border: none;
            padding: 10px;
            border-radius: 20px;
            color: white;
        }
        .icon-btn { color: #888; font-size: 20px; cursor: pointer; }
        
        /* --- SEARCH --- */
        .search-page { padding: 50px 10px; display: none; }
        .search-bar { width: 100%; padding: 10px; background: #333; border: none; color: white; border-radius: 5px; }

        /* --- NOTIFICATION (Toasts) --- */
        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--primary);
            color: black;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            opacity: 0;
            transition: 0.3s;
            z-index: 5000;
            pointer-events: none;
        }

    </style>
</head>
<body>

    <!-- VIDEO FEED -->
    <div class="feed" id="feed">
        <!-- Videos will be injected here by JS -->
    </div>

    <!-- NAVBAR -->
    <div class="navbar">
        <div class="nav-item active" onclick="showPage('home')"><i class="fas fa-home"></i></div>
        <div class="nav-item" onclick="showPage('search')"><i class="fas fa-search"></i></div>
        <div class="add-btn" onclick="document.getElementById('uploadInput').click()">
            <i class="fas fa-plus"></i>
        </div>
        <input type="file" id="uploadInput" accept="video/*" onchange="handleUpload(this)">
        <div class="nav-item" onclick="alert('–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (43 —Ñ—É–Ω–∫—Ü–∏–∏) –ø–æ–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞')"><i class="far fa-comment-dots"></i></div>
        <div class="nav-item" onclick="showProfile()"><i class="far fa-user"></i></div>
    </div>

    <!-- COMMENTS DRAWER -->
    <div class="comments-drawer" id="commentsDrawer">
        <div class="drawer-header">
            –ö–æ–º–µ–Ω—Ç–∞—Ä–∏–∏ (<span id="commentCount">0</span>)
            <div class="close-drawer" onclick="toggleComments()">‚úï</div>
        </div>
        <div class="comments-list" id="commentsList">
            <!-- Comments go here -->
        </div>
        <div class="comment-input-area">
            <i class="fas fa-camera icon-btn" onclick="alert('–û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ...')"></i>
            <input type="text" class="c-input" id="commentInput" placeholder="–°–∫–∞–∂–∏ —á—Ç–æ –¥—É–º–∞–µ—à—å...">
            <i class="fas fa-microphone icon-btn" onclick="recordVoice()"></i>
            <i class="fas fa-paper-plane icon-btn" onclick="postComment()" style="color: var(--primary)"></i>
        </div>
    </div>

    <!-- PROFILE MODAL -->
    <div class="modal" id="profileModal">
        <div class="profile-header">
            <div class="close-drawer" style="left:15px; right:auto" onclick="closeProfile()">‚úï</div>
            <h3>–ú–æ–π –ü—Ä–æ—Ñ–∏–ª—å</h3>
            <br>
            <div class="profile-pic" style="background-image: url('https://images.unsplash.com/photo-1511367461989-f85a21fda167?w=150');"></div>
            <h2 style="margin-top:10px">@DrFire</h2>
            <div class="stats">
                <div class="stat-box"><div class="stat-num">1.2M</div><div class="stat-label">–ü–æ–¥–ø–∏—Å—á–∏–∫–∏</div></div>
                <div class="stat-box"><div class="stat-num">8.5M</div><div class="stat-label">–õ–∞–π–∫–∏</div></div>
                <div class="stat-box"><div class="stat-num">420</div><div class="stat-label">–î—Ä—É–∑—å—è</div></div>
            </div>
            <button style="background:var(--primary); border:none; padding:10px 30px; color:black; font-weight:bold; border-radius:5px">–ò–∑–º–µ–Ω–∏—Ç—å</button>
        </div>
        <div class="friends-list">
            <h4>–î—Ä—É–∑—å—è –æ–Ω–ª–∞–π–Ω:</h4>
            <div class="friend-item">
                <div class="friend-pic" style="background:red"></div>
                <div><b>–û–≥–æ–Ω–µ–∫</b><br><span style="color:gray; font-size:10px">–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≥—Å...</span></div>
            </div>
            <div class="friend-item">
                <div class="friend-pic" style="background:blue"></div>
                <div><b>–ê–Ω–æ–Ω–∏–º</b><br><span style="color:gray; font-size:10px">–í —Å–µ—Ç–∏</span></div>
            </div>
        </div>
    </div>

    <!-- SEARCH PAGE -->
    <div class="modal search-page" id="searchPage" style="background:black; z-index:1500;">
        <input type="text" class="search-bar" placeholder="–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –≤–∏–¥–µ–æ...">
        <div style="margin-top:20px; color:gray; text-align:center">
            <h3>–¢—Ä–µ–Ω–¥—ã "–û–≥–æ–Ω—å–∫–∞" üî•</h3>
            <p>#–±–µ–∑–ø—Ä–∞–≤–∏–ª</p>
            <p>#—Å–≤–æ–±–æ–¥–∞</p>
            <p>#—Ö–æ—á—É—Ä–µ–∫</p>
        </div>
        <div class="nav-item" style="position:fixed; bottom:20px; left:50%; transform:translateX(-50%)" onclick="closeSearch()">
            <i class="fas fa-times-circle" style="font-size:40px"></i>
        </div>
    </div>

    <div class="toast" id="toast">–î–µ–π—Å—Ç–≤–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ!</div>

    <script>
        // --- DATA ---
        let videos = [
            {
                url: "https://assets.mixkit.co/videos/preview/mixkit-fireworks-illuminating-the-beach-sky-4161-large.mp4",
                user: "@ogonek_official",
                desc: "–°–≤–æ–±–æ–¥–∞ —Å–ª–æ–≤–∞ –∑–¥–µ—Å—å! üî• #firetok",
                likes: 1200,
                comments: [],
                shares: 45
            },
            {
                url: "https://assets.mixkit.co/videos/preview/mixkit-waves-coming-to-the-beach-5016-large.mp4",
                user: "@nature_lover",
                desc: "–ë–µ–∑ –ø—Ä–∞–≤–∏–ª - –∑–Ω–∞—á–∏—Ç –∫—Ä–∞—Å–∏–≤–æ. üåä",
                likes: 850,
                comments: [],
                shares: 12
            }
        ];

        let currentUser = {
            username: "@DrFire",
            avatar: "https://images.unsplash.com/photo-1511367461989-f85a21fda167?w=150"
        };

        // --- INIT ---
        const feed = document.getElementById('feed');
        
        function renderFeed() {
            feed.innerHTML = "";
            videos.forEach((vid, index) => {
                const div = document.createElement('div');
                div.className = 'video-container';
                div.innerHTML = `
                    <video src="${vid.url}" loop onclick="togglePlay(this)"></video>
                    
                    <div class="actions">
                        <div style="position:relative">
                            <div class="feed-avatar" style="background: url('https://via.placeholder.com/50/FF4500') center/cover;"></div>
                            <span class="follow-plus" onclick="followUser(this)">+</span>
                        </div>
                        
                        <div class="action-btn" onclick="likeVideo(this, ${index})">
                            <i class="fas fa-heart"></i>
                            <span class="action-label">${vid.likes}</span>
                        </div>
                        
                        <div class="action-btn" onclick="toggleComments(${index})">
                            <i class="fas fa-comment-dots"></i>
                            <span class="action-label">${vid.comments.length}</span>
                        </div>
                        
                        <div class="action-btn" onclick="shareVideo()">
                            <i class="fas fa-share"></i>
                            <span class="action-label">${vid.shares}</span>
                        </div>

                        <div class="action-btn" style="animation: spin 4s linear infinite">
                            <i class="fas fa-compact-disc"></i>
                        </div>
                    </div>

                    <div class="overlay">
                        <div class="video-info">
                            <div class="username">${vid.user}</div>
                            <div class="description">${vid.desc}</div>
                        </div>
                    </div>
                `;
                feed.appendChild(div);
            });
            
            // Auto play first video
            setTimeout(() => {
                const firstVideo = document.querySelector('video');
                if(firstVideo) firstVideo.play().catch(e => console.log("Autoplay blocked"));
            }, 500);
        }

        // --- LOGIC ---

        function togglePlay(video) {
            if (video.paused) video.play();
            else video.pause();
        }

        function likeVideo(btn, index) {
            const icon = btn.querySelector('i');
            const label = btn.querySelector('.action-label');
            
            if (icon.classList.contains('like-active')) {
                icon.classList.remove('like-active');
                videos[index].likes--;
            } else {
                icon.classList.add('like-active');
                videos[index].likes++;
                showToast("–õ–∞–π–∫ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω! ‚ù§Ô∏è");
            }
            label.innerText = videos[index].likes;
        }

        let currentVideoIndex = 0;

        function toggleComments(index) {
            const drawer = document.getElementById('commentsDrawer');
            if (typeof index !== 'undefined') {
                currentVideoIndex = index;
                renderComments();
                drawer.classList.add('open');
            } else {
                drawer.classList.remove('open');
            }
        }

        function renderComments() {
            const list = document.getElementById('commentsList');
            document.getElementById('commentCount').innerText = videos[currentVideoIndex].comments.length;
            list.innerHTML = "";
            
            videos[currentVideoIndex].comments.forEach(c => {
                list.innerHTML += `
                    <div class="comment-item">
                        <div class="friend-pic" style="width:30px;height:30px;min-width:30px"></div>
                        <div>
                            <div style="font-weight:bold; font-size:11px">${c.user}</div>
                            <div class="comment-content">
                                ${c.text}
                                ${c.type === 'voice' ? '<br><i class="fas fa-microphone"></i> 0:05' : ''}
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        function postComment() {
            const input = document.getElementById('commentInput');
            if (!input.value) return;
            
            videos[currentVideoIndex].comments.push({
                user: currentUser.username,
                text: input.value,
                type: 'text'
            });
            input.value = "";
            renderComments();
        }

        function recordVoice() {
            showToast("üé§ –ì–æ–ª–æ—Å–æ–≤–æ–µ –∑–∞–ø–∏—Å–∞–Ω–æ!");
            videos[currentVideoIndex].comments.push({
                user: currentUser.username,
                text: "–ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ",
                type: 'voice'
            });
            renderComments();
        }

        function followUser(btn) {
            btn.style.display = 'none';
            showToast("–í—ã –ø–æ–¥–ø–∏—Å–∞–ª–∏—Å—å! üî•");
        }

        function shareVideo() {
            videos[currentVideoIndex].shares++;
            showToast("–†–µ–ø–æ—Å—Ç —Å–¥–µ–ª–∞–Ω! ‚Ü™Ô∏è");
        }

        // --- UPLOAD SIMULATION ---
        function handleUpload(input) {
            const file = input.files[0];
            if (file) {
                const url = URL.createObjectURL(file);
                // Add to start of feed
                videos.unshift({
                    url: url,
                    user: currentUser.username,
                    desc: "–¢–æ–ª—å–∫–æ —á—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ! #–Ω–æ–≤–∏–Ω–∫–∞",
                    likes: 0,
                    comments: [],
                    shares: 0
                });
                renderFeed();
                showToast("–í–∏–¥–µ–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ! üìπ");
            }
        }

        // --- NAVIGATION ---
        function showProfile() {
            document.getElementById('profileModal').style.display = 'flex';
        }
        function closeProfile() {
            document.getElementById('profileModal').style.display = 'none';
        }
        
        function showPage(page) {
            if(page === 'search') {
                document.getElementById('searchPage').style.display = 'block';
            } else if (page === 'home') {
                closeSearch();
            }
        }
        function closeSearch() {
            document.getElementById('searchPage').style.display = 'none';
        }

        function showToast(msg) {
            const t = document.getElementById('toast');
            t.innerText = msg;
            t.style.opacity = 1;
            setTimeout(() => t.style.opacity = 0, 2000);
        }

        // --- START ---
        renderFeed();

        // Observer for auto-play on scroll
        let options = { threshold: 0.6 };
        let observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                let vid = entry.target.querySelector('video');
                if (entry.isIntersecting) {
                    vid.play();
                } else {
                    vid.pause();
                }
            });
        }, options);

        setTimeout(() => {
            document.querySelectorAll('.video-container').forEach(el => observer.observe(el));
        }, 1000);

    </script>
</body>
</html>